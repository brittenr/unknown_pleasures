install.packages('rgdal')
?readOGR
?rgdal::readOGR
#this works, note track_points on layer name does not work!
gpx.raw <- readOGR(dsn = 'data/gpx/4 Hourtin-Pessac.gpx', layer="waypoints")
#this works, note track_points on layer name does not work!
gpx.raw <- rgdal::readOGR(dsn = 'data/gpx/4 Hourtin-Pessac.gpx', layer="waypoints")
#this works, note track_points on layer name does not work!
gpx.raw <- rgdal::readOGR(dsn = 'data/gpx/4 Hourtin-Pessac.gpx')
#this works, note track_points on layer name does not work!
gpx.raw <- rgdal::readOGR(dsn = 'data/gpx/Dieppe to Eiffel Tower.gpx')
install.packages('plotKML')
#this works, note track_points on layer name does not work!
gpx.raw <- plotKML::readGPX('data/gpx/Dieppe to Eiffel Tower.gpx')
get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
get_gps_elevation <- function(gpx_file) {
plotKML::readGPX(gpx_file) %>%
.$track[[1]]$ele
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
install.packages('dplyr')
installed.packages('tidyverse')
installed.packages('tidyverse')
library(dplyr)
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
get_gps_elevation <- function(gpx_file) {
plotKML::readGPX(gpx_file) %>%
.$tracks[[1]]$ele
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file) %>%
gpx$tracks
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
gpx <- plotKML::readGPX(gpx_file) %>%
gpx@tracks
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file) %>%
gpx@tracks
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file) %>%
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
gpx <- plotKML::readGPX(gpx_file)
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file)
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file)
gpx$tracks
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
gpx$tracks[[1]]
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file)
gpx$tracks[[1]]
}
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file)
gpx$tracks[[1]]
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
get_gps_elevation <- function(gpx_file) {
gpx <- plotKML::readGPX(gpx_file)
gpx$tracks[[1]][[1]]$ele
}
test <- get_gps_elevation('data/gpx/Cobham to Portsmouth.gpx')
install.packages('yaml')
config <- yaml::read_yaml('config.yaml')
get_gps_elevation <- function(gpx_file) {
if( length(gpx_file) == 1 ) {
gpx <- plotKML::readGPX(gpx_file)
return( gpx$tracks[[1]][[1]]$ele )
} else {
elevation <- numeric()
for( i in seq_along(gpx_file) ) {
gpx <- plotKML::readGPX(gpx_file[i])
elevation <- c(elevation,gpx$tracks[[1]][[1]]$ele)
}
}
return(elevation)
}
get_gps_elevation(config$rides$france_bike_coeur)
config <- yaml::read_yaml('config.yaml')
get_gps_elevation(config$rides$france_bike_coeur$gpx)
config$rides$france_bike_coeur$gpx
get_gps_elevation(file.path(config$set_up$gpx_dir,config$rides$france_bike_coeur$gpx))
get_gps_elevation(file.path(config$set_up$gpx_dir,config$rides$france_bike_coeur$gpx)) %>%
plot()
install.packages('h2o')
h2o::h2o.init()
h2o::h2o.init()
install.packages('kmlShape')
install.packages('kmlShape')
source('C:/GITHUB/unknown_pleasures/R/0_setup.R', encoding = 'UTF-8', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('C:/GITHUB/unknown_pleasures/R/functions/get_plot_line_from_elevation.R', echo=TRUE)
source('C:/GITHUB/unknown_pleasures/R/functions/get_plot_line_from_elevation.R', echo=TRUE)
Px <- 1:length(elevation)
elevation <- test$london_exeter
#trim the start and end of the elevation
elevation <- elevation[10:(length(elevation)-10)]
#reset start or end percents to 0
min_reset <- elevation %>%
.[c( (1:round(length(.)*0.01)) , (round(length(.)*0.99):length(.)) ) ] %>%
min()
elevation <- elevation - min_reset
Px <- 1:length(elevation)
Py <- elevation
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,20),type="b",col=4)
plot(DouglasPeuckerNbPoints(Px,Py,20,spar=0.5),type="b",col=3)
plot(DouglasPeuckerNbPoints(Px,Py,10,spar=0.5),type="b",col=2)
librarykmlShape
library(kmlShape)
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,20),type="b",col=4)
plot(DouglasPeuckerNbPoints(Px,Py,20,spar=0.5),type="b",col=3)
plot(DouglasPeuckerNbPoints(Px,Py,10,spar=0.5),type="b",col=2)
?DouglasPeuckerNbPoints
?DouglasPeuckerNbPoints
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="b",col=4)
plot(DouglasPeuckerNbPoints(Px,Py,20,spar=0.5),type="b",col=3)
plot(DouglasPeuckerNbPoints(Px,Py,10,spar=0.5),type="b",col=2)
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerNbPoints(Px,Py,20,spar=0.5),type="b",col=3)
plot(DouglasPeuckerNbPoints(Px,Py,10,spar=0.5),type="b",col=2)
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerNbPoints(Px,Py,20,spar=0.5),type="l",col=3)
plot(DouglasPeuckerNbPoints(Px,Py,10,spar=0.5),type="l",col=2)
plot(DouglasPeuckerNbPoints(Px,Py,50),type="l",col=4)
plot(DouglasPeuckerNbPoints(Px,Py,20,spar=0.5),type="l",col=3)
plot(DouglasPeuckerNbPoints(Px,Py,10,spar=0.5),type="l",col=2)
plot(DouglasPeuckerNbPoints(Px,Py,150),type="l",col=4)
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,1),type="l",col=4)
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,1),type="l",col=4)
plot(DouglasPeuckerNbPoints(Px,Py,50),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,10),type="l",col=4)
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,10),type="l",col=4)
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,10),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,10) %>% smooth(),type="l",col=4)
DouglasPeuckerEpsilon(Px,Py,10)
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,10),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,20),type="l",col=4)
points <- DouglasPeuckerEpsilon(Px,Py,20)
plot(points$x,points$y_smooth,type="l")
points <- DouglasPeuckerEpsilon(Px,Py,20)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
points <- DouglasPeuckerEpsilon(Px,Py,10)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,10),type="l",col=4)
points <- DouglasPeuckerEpsilon(Px,Py,10)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,5),type="l",col=4)
points <- DouglasPeuckerEpsilon(Px,Py,5)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,100),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,5),type="l",col=4)
#plot(DouglasPeuckerEpsilon(Px,Py,20),type="l",col=4)
points <- DouglasPeuckerNbPoints(Px,Py,100)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,200),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,5),type="l",col=4)
#plot(DouglasPeuckerEpsilon(Px,Py,20),type="l",col=4)
points <- DouglasPeuckerNbPoints(Px,Py,200)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
?smooth
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,200),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,5),type="l",col=4)
#plot(DouglasPeuckerEpsilon(Px,Py,20),type="l",col=4)
points <- DouglasPeuckerNbPoints(Px,Py,200)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,200),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,5),type="l",col=4)
#plot(DouglasPeuckerEpsilon(Px,Py,20),type="l",col=4)
points <- DouglasPeuckerNbPoints(Px,Py,200)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
par(mfrow=c(2,2))
plot(Px,Py,type="l")
plot(DouglasPeuckerNbPoints(Px,Py,200),type="l",col=4)
plot(DouglasPeuckerEpsilon(Px,Py,5),type="l",col=4)
#plot(DouglasPeuckerEpsilon(Px,Py,20),type="l",col=4)
points <- DouglasPeuckerNbPoints(Px,Py,500)
points$y_smooth <- points$y %>% smooth()
plot(points$x,points$y_smooth,type="l")
